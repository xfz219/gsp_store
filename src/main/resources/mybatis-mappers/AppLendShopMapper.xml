<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.puhui.app.dao.AppLendShopDao">

	<resultMap id="appLendShopObj" type="appLendShop">
		<id property="id" column="id"/>
		<result property="parentId" column="parent_id"/>
		<result property="shopCode" column="shop_code"/>
		<result property="shopName" column="shop_name"/>
		<result property="shopMobile" column="shop_mobile"/>
		<result property="shopAddress" column="shop_address"/>
		<result property="longitude" column="longitude"/>
		<result property="latitude" column="latitude"/>
		<result property="enabled" column="enabled"/>
		<result property="updateTime" column="update_time"/>
	</resultMap>

	<select id="findList" resultMap="appLendShopObj">
		SELECT * FROM app_lend_shop WHERE 1 = 1
		<if test="shopName != null and shopName != ''">
			AND shop_name LIKE CONCAT(CONCAT('%',#{shopName}),'%')
		</if>
		<if test="enabled != null">
			AND enabled = #{enabled}
		</if>
	</select>

	<select id="getAppLendShop" resultMap="appLendShopObj">
		SELECT * FROM app_lend_shop WHERE id = #{id}
	</select>

	<insert id="addAppLendShop" parameterType="com.puhui.app.po.AppLendShop" useGeneratedKeys="true" keyProperty="id">
		insert into app_lend_shop
		(parent_id, shop_code, shop_name, shop_mobile, shop_address, longitude, latitude, enabled, create_time, update_time)
		values
		(#{parentId}, #{shopCode}, #{shopName}, #{shopMobile}, #{shopAddress}, #{longitude}, #{latitude}, #{enabled}, now(), now())
	</insert>

	<update id="updateAppLendShop" parameterType="com.puhui.app.po.AppLendShop">
		UPDATE app_lend_shop SET
		parent_id = #{parentId}, shop_code = #{shopCode},
		shop_name = #{shopName}, shop_mobile = #{shopMobile},
		shop_address = #{shopAddress}, longitude = #{longitude},
	    latitude = #{latitude}, enabled = #{enabled}
	    WHERE id = #{id}
	</update>

	<update id="updateEnabledById" >
		UPDATE app_lend_shop SET
		enabled = #{enabled} WHERE id = #{id}
	</update>

</mapper>